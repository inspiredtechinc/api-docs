<!DOCTYPE html>
<html>
<head>
  <title>Swagger UI</title>
  <link rel="stylesheet" type="text/css" href="../../../../assets/swagger-ui.css">
</head>
<body>
  <div id="swagger-ui"></div>
  <script src="../../../../assets/swagger-ui-bundle.js"></script>
  <script>
    const spec = {"openapi":"3.0.0","info":{"title":"Project X - Review Service API","description":"API specification for the Review service of Project X","version":"1.0.0","contact":{"name":"project-x-api","url":"https://www.inspiredtech.ca","email":"info@aircouch.com"},"termsOfService":"https://www.inspiredtech.ca/terms","license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"}},"tags":[{"name":"review","description":"Review operations"}],"servers":[{"url":"https://app-x-staging-gateway-8ua0taf7.uc.gateway.dev/api/v1"}],"paths":{"/reviews/heartbeat":{"get":{"summary":"Health check endpoint","description":"This endpoint is used to check the health status of the API service.\n","operationId":"getHeartbeat","x-google-backend":{"address":"https://review-service-ee3nwblsmq-uc.a.run.app","path_translation":"APPEND_PATH_TO_ADDRESS"},"tags":["review"],"security":[],"responses":{"200":{"description":"API is healthy","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["healthy"]}}}}}},"400":{"description":"Bad request","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}}}}}}}}},"/reviews":{"get":{"summary":"Get reviews with filters (author, target, type, category, etc.)","description":"Retrieve a list of reviews filtered by author, target, type, category, listing, and pagination.\n","tags":["review"],"operationId":"listReviews","x-google-backend":{"address":"https://review-service-ee3nwblsmq-uc.a.run.app","path_translation":"APPEND_PATH_TO_ADDRESS"},"security":[{"jwtAuth":[]}],"parameters":[{"name":"author","in":"query","required":false,"schema":{"type":"string"},"description":"Filter by author user ID"},{"name":"target","in":"query","required":false,"schema":{"type":"string"},"description":"Filter by target user or listing ID"},{"name":"type","in":"query","required":false,"schema":{"type":"string","enum":["user","listing"]},"description":"Filter by review type (user or listing)"},{"name":"category","in":"query","required":false,"schema":{"type":"string"},"description":"Filter by review category (e.g., couchsurf, workspace)"},{"name":"listing_id","in":"query","required":false,"schema":{"type":"string"},"description":"Filter by listing ID"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10}}],"responses":{"200":{"description":"List of reviews matching filters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"400":{"description":"Invalid request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}},"default":{"description":"Default","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}}}},"post":{"summary":"Create a new review (user or listing)","description":"Create a new review for a user or listing, specifying context, metrics, and other details.\n","tags":["review"],"operationId":"createReview","x-google-backend":{"address":"https://review-service-ee3nwblsmq-uc.a.run.app","path_translation":"APPEND_PATH_TO_ADDRESS"},"security":[{"jwtAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewRequest"},"examples":{"guest_review_space":{"summary":"Guest reviews a space (listing)","value":{"author":"alice_user_id","target":"listing_bob_id","type":"listing","comment":"The room was clean and comfortable.","emoji_sentiment":"üëç","metrics":{"cleanliness":5,"communication":4.5,"check_in":4,"accuracy":4.5,"location":4,"value":4.5},"context":"guest_review_space","booking_id":"booking_123"}},"guest_review_host":{"summary":"Guest reviews host","value":{"author":"alice_user_id","target":"bob_user_id","type":"user","comment":"Bob was a wonderful host!","emoji_sentiment":"üëç","metrics":{"hospitality":5,"communication":4.5,"cleanliness":4.5,"respectfulness":5,"would_visit_again":true},"context":"guest_review_host","booking_id":"booking_123"}},"host_review_guest":{"summary":"Host reviews guest","value":{"author":"bob_user_id","target":"alice_user_id","type":"user","comment":"Alice was respectful and tidy.","emoji_sentiment":"üëç","metrics":{"communication":4,"cleanliness":4.5,"respectfulness":4.5,"would_host_again":true},"context":"host_review_guest","booking_id":"booking_123"}}}}}},"responses":{"201":{"description":"The created review","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"400":{"description":"Invalid request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}},"default":{"description":"Default","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}}}}},"/reviews/{id}":{"get":{"summary":"Get a single review by ID","description":"Retrieve a single review by its unique ID.\n","tags":["review"],"operationId":"getReviewById","x-google-backend":{"address":"https://review-service-ee3nwblsmq-uc.a.run.app","path_translation":"APPEND_PATH_TO_ADDRESS"},"security":[{"jwtAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"},"description":"Review ID"}],"responses":{"200":{"description":"The review","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"404":{"description":"Review not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}},"default":{"description":"Default","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}}}},"patch":{"summary":"Partially update a review (e.g., change comment, rating, etc.)","description":"Update fields of an existing review, such as comment, rating, or metrics.\n","tags":["review"],"operationId":"patchReview","x-google-backend":{"address":"https://review-service-ee3nwblsmq-uc.a.run.app","path_translation":"APPEND_PATH_TO_ADDRESS"},"security":[{"jwtAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"},"description":"Review ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewUpdateRequest"}}}},"responses":{"200":{"description":"The updated review","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"400":{"description":"Invalid request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}},"404":{"description":"Review not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}},"default":{"description":"Default","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}}}},"delete":{"summary":"Delete a review","description":"Delete a review by its unique ID.\n","tags":["review"],"operationId":"deleteReview","x-google-backend":{"address":"https://review-service-ee3nwblsmq-uc.a.run.app","path_translation":"APPEND_PATH_TO_ADDRESS"},"security":[{"jwtAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"},"description":"Review ID"}],"responses":{"200":{"description":"Review deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"404":{"description":"Review not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}},"default":{"description":"Default","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}}}}},"/reviews/{id}/report":{"post":{"summary":"Report an inappropriate review","description":"Report a review as inappropriate, misleading, spam, or offensive.\n","tags":["review"],"operationId":"reportReview","x-google-backend":{"address":"https://review-service-ee3nwblsmq-uc.a.run.app","path_translation":"APPEND_PATH_TO_ADDRESS"},"security":[{"jwtAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"},"description":"Review ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportReviewRequest"}}}},"responses":{"200":{"description":"Review reported successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"404":{"description":"Review not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}},"default":{"description":"Default","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}}}}},"/reviews/{id}/respond":{"post":{"summary":"Respond to a review","description":"Add a response to a review as the target user or listing owner.\n","tags":["review"],"operationId":"respondToReview","x-google-backend":{"address":"https://review-service-ee3nwblsmq-uc.a.run.app","path_translation":"APPEND_PATH_TO_ADDRESS"},"security":[{"jwtAuth":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"},"description":"Review ID"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewResponseRequest"}}}},"responses":{"200":{"description":"Response added successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIResponse"}}}},"404":{"description":"Review not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}},"default":{"description":"Default","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DefaultResponse"}}}}}}}},"components":{"schemas":{"Review":{"type":"object","properties":{"id":{"type":"string"},"author":{"type":"string","description":"The user writing the review"},"target":{"type":"string","description":"The user or listing being reviewed"},"type":{"type":"string","enum":["user","listing"],"description":"Type of entity being reviewed"},"category":{"type":"string"},"overall_rating":{"type":"number"},"comment":{"type":"string"},"emoji_sentiment":{"type":"string"},"metrics":{"type":"object","additionalProperties":true},"booking_id":{"type":"string"},"listing_id":{"type":"string"},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"},"status":{"type":"string"},"version":{"type":"integer"},"edit_history":{"type":"array","items":{"$ref":"#/components/schemas/ReviewEdit"}}},"required":["id","author","target","type","metrics","created_at","updated_at","status","version","edit_history"]},"GuestReviewSpaceMetrics":{"type":"object","required":["cleanliness","communication","check_in","accuracy","location","value"],"properties":{"cleanliness":{"type":"number"},"communication":{"type":"number"},"check_in":{"type":"number"},"accuracy":{"type":"number"},"location":{"type":"number"},"value":{"type":"number"}}},"GuestReviewHostMetrics":{"type":"object","required":["hospitality","communication","cleanliness","respectfulness","would_visit_again"],"properties":{"hospitality":{"type":"number"},"communication":{"type":"number"},"cleanliness":{"type":"number"},"respectfulness":{"type":"number"},"would_visit_again":{"type":"boolean"}}},"HostReviewGuestMetrics":{"type":"object","required":["communication","cleanliness","respectfulness","would_host_again"],"properties":{"communication":{"type":"number"},"cleanliness":{"type":"number"},"respectfulness":{"type":"number"},"would_host_again":{"type":"boolean"}}},"ReviewRequest":{"type":"object","required":["author","target","type","metrics","context","booking_id"],"properties":{"author":{"type":"string","description":"The user writing the review"},"target":{"type":"string","description":"The user or listing being reviewed"},"type":{"type":"string","enum":["user","listing"],"description":"Type of entity being reviewed"},"comment":{"type":"string","maxLength":1000},"emoji_sentiment":{"type":"string","enum":["üëç","üëçüëç","üëé"],"description":"Optional quick sentiment indicator"},"metrics":{"description":"Category-specific metrics (flexible)","oneOf":[{"$ref":"#/components/schemas/GuestReviewSpaceMetrics"},{"$ref":"#/components/schemas/GuestReviewHostMetrics"},{"$ref":"#/components/schemas/HostReviewGuestMetrics"}]},"context":{"type":"string","enum":["host_review_guest","guest_review_host","guest_review_space"],"description":"Explicit review context to distinguish scenario (e.g., host_review_guest, guest_review_host, guest_review_space)"},"booking_id":{"type":"string","description":"Associated booking ID if applicable"}}},"ReviewUpdateRequest":{"type":"object","properties":{"comment":{"type":"string","maxLength":1000},"emoji_sentiment":{"type":"string","enum":["üëç","üëçüëç","üëé"]},"metrics":{"type":"object","description":"Category-specific metrics (flexible)","additionalProperties":true}}},"ReviewEdit":{"type":"object","properties":{"version":{"type":"integer"},"updated_at":{"type":"string","format":"date-time"},"changes":{"type":"object","additionalProperties":true}},"required":["version","updated_at","changes"]},"ReportReviewRequest":{"type":"object","required":["reason","reported_by"],"properties":{"reason":{"type":"string","enum":["INAPPROPRIATE","MISLEADING","SPAM","OFFENSIVE","OTHER"]},"details":{"type":"string","maxLength":500,"description":"Additional details about the report"},"reported_by":{"type":"string","description":"User ID of the person reporting the review"}}},"ReviewResponseRequest":{"type":"object","required":["comment"],"properties":{"comment":{"type":"string","maxLength":1000,"description":"The response text"}}},"APIResponse":{"type":"object","properties":{"success":{"type":"boolean"},"error":{"type":"string"},"toast":{"type":"string"},"data":{"oneOf":[{"$ref":"#/components/schemas/Review"},{"type":"array","items":{"$ref":"#/components/schemas/Review"}}]}},"required":["success","toast"]},"DefaultResponse":{"type":"object","properties":{"success":{"type":"boolean"},"error":{"type":"string"},"toast":{"type":"string","maxLength":255}},"required":["success","toast"]}},"securitySchemes":{"googleApiKey":{"type":"apiKey","name":"api_key","in":"header"},"jwtAuth":{"type":"apiKey","name":"Authorization","in":"header"}}},"x-last-generated":"2025-09-06T11:07:49.822Z"};
    const ui = SwaggerUIBundle({ spec, dom_id: '#swagger-ui' });
  </script>
</body>
</html>